use std::{collections::HashSet, ops::RangeBounds, time::Instant};

use itertools::Itertools;

const INPUT: &str = "";

const INPUT2: &str = "
......................................................................S......................................................................
.............................................................................................................................................
......................................................................^......................................................................
.............................................................................................................................................
.....................................................................^.^.....................................................................
.............................................................................................................................................
....................................................................^...^....................................................................
.............................................................................................................................................
...................................................................^.^...^...................................................................
.............................................................................................................................................
..................................................................^.......^..................................................................
.............................................................................................................................................
.................................................................^...^.^.^.^.................................................................
.............................................................................................................................................
................................................................^.....^.^...^................................................................
.............................................................................................................................................
...............................................................^.^.^.^...^.^.^...............................................................
.............................................................................................................................................
..............................................................^.^.^.^.^...^...^..............................................................
.............................................................................................................................................
.............................................................^.^...^.^.^.^...^.^.............................................................
.............................................................................................................................................
............................................................^...^.^.^.......^...^............................................................
.............................................................................................................................................
...........................................................^.^.....^...^.....^.^.^...........................................................
.............................................................................................................................................
..........................................................^...^.^...^...^...^.^.^.^..........................................................
.............................................................................................................................................
.........................................................^.^.^...^.^.^.^.....^.^.^.^.........................................................
.............................................................................................................................................
........................................................^.^.....^.^.^.^.^...^.^...^.^........................................................
.............................................................................................................................................
.......................................................^.^.......^.^.^.^.....^.......^.......................................................
.............................................................................................................................................
......................................................^.^.^.^.^...^...^.^...^.........^......................................................
.............................................................................................................................................
.....................................................^.....^.^.......^.........^.^.^.^.^.....................................................
.............................................................................................................................................
....................................................^.^.^.^...^.^.^...^.....^...^...^.^.^....................................................
.............................................................................................................................................
...................................................^...^.^.^.....^...^.^.^.^.^.^.^.......^...................................................
.............................................................................................................................................
..................................................^.^...^.^.^.^.^...^.^.....^.^.^.^.^.^.^.^..................................................
.............................................................................................................................................
.................................................^.^.^.^.^.......^.^...^.^.^.....^.^...^...^.................................................
.............................................................................................................................................
................................................^.^.^.^...^...^.^.^.^.^.^.^.^.^.^.^.^...^...^................................................
.............................................................................................................................................
...............................................^.^.^.^...^...^...^.^.^...^.^.^.....^.^.^...^.^...............................................
.............................................................................................................................................
..............................................^...^...^...^.....^...^...^...^...^...^.^.^.^...^..............................................
.............................................................................................................................................
.............................................^.^...^.^.^.^.^...^.^...^.^.....^.^.^.^.^.^.......^.............................................
.............................................................................................................................................
............................................^.^.^.^.^...^.^.....^...^.^.^.^.......^...^...^.^...^............................................
.............................................................................................................................................
...........................................^.^...^.^.^...^.^.^.....^.....^...^.^.^...^...^.^.^.^.^...........................................
.............................................................................................................................................
..........................................^...^...^...^.....^.^.^.^...^.^...^.^.^.^.^.^.^.^.^.^.^.^..........................................
.............................................................................................................................................
.........................................^.^.....^.^...^...^...^.^.^.^...^.^...^.........^.^.^.....^.........................................
.............................................................................................................................................
........................................^.^.....^.^.^...^...^...^.....^...^...^.^.^.^.^.^.^.^.^.^.^.^........................................
.............................................................................................................................................
.......................................^...^.^.^.^.^...^...^.^.^.^.^.^...^...^.^...^.......^.^.^...^.^.......................................
.............................................................................................................................................
......................................^.^.^...^.^.^.....^.......^.................^...^.^.^.^.^.^.^.^.^......................................
.............................................................................................................................................
.....................................^.^.......^.....^.^...^.^.^.^.......^...^.^.^...^.^...^.^.^.^...^.^.....................................
.............................................................................................................................................
....................................^.^...^...^.^.^.^.....^...^...^.^.^.....^...^...^.^.^...^...^...^...^....................................
.............................................................................................................................................
...................................^.^.^...^.....^...^.^.^...^...^.^...^.^.^...^.^.......^.^...^.^...^...^...................................
.............................................................................................................................................
..................................^.^.^.^.......^...^.^.^...^.^.^.^...^.^.^.....^.^.^.......^.^.^...^.^...^..................................
.............................................................................................................................................
.................................^...^...^.^.^.^...^...^...^.^.^.....^.^.^...^.^.......^.^.^.^...^.....^.^.^.................................
.............................................................................................................................................
................................^.^.^.....^.^.^.^.^.^.....^.^.^...^.^...^.....^.^.^.^.^.^.^.^.....^.^.^.^.^.^................................
.............................................................................................................................................
...............................^...^.^.^.....^.^...^...^.......^.^.^.....^.^.^.^.^.^.^.^.^...^...^.^.....^.^.^...............................
.............................................................................................................................................
..............................^.^.^.^.^.......^.^...^...^.^.^...^...^.^.^.........^.^.^.^...^.....^...^.^.^.^.^..............................
.............................................................................................................................................
.............................^...^...^.^...^.^.^.^.........^.^.^.^.^.^...^.^...^.....^.....^.^.....^...^...^.^.^.............................
.............................................................................................................................................
............................^.......^...^.^.^.^.^...^...^.^.^.^.^.^...^.^...^.^.^.^...^.^.^.^.^.^.^...^.^.^...^.^............................
.............................................................................................................................................
...........................^.^...^...^.^...^...^.^.^.....^.......^.^.....^.^.^.^.^.^.......^.^.^...^...^.^...^...^...........................
.............................................................................................................................................
..........................^.......^.^.^.^.^.^...^.^.^...^...^.......^...^.^.^...^.....^...^...^.....^...^.^...^.^.^..........................
.............................................................................................................................................
.........................^...^.^.^.^...^.^...^.^.^.^.^.^...^...^.^.....^.^.^.^...^.^...^.^.^.^.^.^.........^.^.^.^.^.........................
.............................................................................................................................................
........................^...^.^...^...^.^.^.^.^.^.^.^.^.^.^...^...^...^...^.......^.^.....^.^.^.^.^.^.....^...^...^.^........................
.............................................................................................................................................
.......................^...^.^...^...^.^.......^.^.^.^.^.^...^.^.^.^...^.^...^.^.^.......^.....^.^.^.^.^.^.....^.^.^.^.......................
.............................................................................................................................................
......................^.^.^.^.^.^...^...^.^.^.^...^.^.....^.....^.^.^.^...^.^.^.^.^.^...^.^...^.^.^.........^.......^.^......................
.............................................................................................................................................
.....................^.^.^.....^.....^.^.^.^.......^.^.^...^.^.^.....^...^.^.^.^...^...^.^.......^...^.^.^.^...^.^.^...^.....................
.............................................................................................................................................
....................^.....^.^.....^...^...^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^...^...^.^...^...^...^...^.....^...^....................
.............................................................................................................................................
...................^.^...^...^.^.^.^.....^.^.^...^.^.....^...^...^.^.^.^...^.^...^.^.^.^.^.^.....^.^.^.^.......^...^.^.^.^...................
.............................................................................................................................................
..................^.^.......^.^...^.^...^.^.^...^.^.^.^...^.....^.^.^...^.^.^.^.^...^.^...^...^.^.^.^.^.^...^.^.^.^.^.^...^..................
.............................................................................................................................................
.................^.^.^...^.^.^.^.....^.^.^.^.^.....^.^.....^.^.^.^...^...^.^.......^.^.^.^.^...^.^.....^.^...^.^.^.^...^...^.................
.............................................................................................................................................
................^...^.^.^...^.^.....^.^.^.^.^.^.^.^...^.....^.^...^.^...^...^...^...^.^.^.....^.^.^.^.^.^.^.....^...^.^.^...^................
.............................................................................................................................................
...............^...^.^...^.^.^...^.^...^...^.^.^.^.^.^.^.^.^.^.^.^...^.^.^...^.....^.^.......^.^...^.^...^.^.^.^.^.^.^.^.^.^.^...............
.............................................................................................................................................
..............^.^...^...^.....^...^.^...^.^...^.^.^.^.^.....^...^...^.....^.^.^...^.^...^.^...^.....^...^...^.....^...^.^.^...^..............
.............................................................................................................................................
.............^.....^.^.^.^...^.....^.^.......^.^.^.^.^.^.^.....^...^.....^.^.....^.^.^.....^...^.^...^.^.^.^...^.^.....^...^.^.^.............
.............................................................................................................................................
............^.^...^.^.......^.^.^.^.^...^.^.^.....^.^.^.^...^...^.....^...^.^...^.^.^...^.^.^.^...^...^.....^.^.^.^...^.^...^.^.^............
.............................................................................................................................................
...........^.....^.^.^.^...^...^.^...^...^.....^.^...^...^.^.^...^.^.......^.^.^...^.^...^.^.......^.^...^.......^.^...^...^.^.^.^...........
.............................................................................................................................................
..........^.^.^.^.......^...^.^.^.^.^.^.^...^.....^.^...^.^.^.^.^.^.^.^.^...^.^.....^.^.......^.^.^.^...^.^.......^.^...^.^...^...^..........
.............................................................................................................................................
.........^.^...^.....^.^.^.^.^.^.^.^...^.^.^.^...^.^.^.^.^.^.^.^...^...^...^.^.^.^.^.^.^.^.^.^.^...^.....^.^.^.^.^.^...^.^.^...^.^.^.........
.............................................................................................................................................
........^.^.^...^.^...^.^.^.^...^.......^...^...^.^.^.^.....^.^...^.^.^.....^.^.^.^.^.^.^...^.^...^.^.^.......^...^.^...^.....^.^...^........
.............................................................................................................................................
.......^.^.^.....^.....^.....^.^.^.^.^.^...^.^...^...^...^.........^.^...^.^.^...^.^...^.^.^...^.^.........^.^.^.^.^.^...^...^.^.^.^.^.......
.............................................................................................................................................
......^...^.^...^...^.^.^...^...^.^.^.^.^.^.^.^.^.^...^...^.....^.......^.^.^.^.^.^.^.^...^.^.^...^...^.^...^.....^.......^.^.^...^.^.^......
.............................................................................................................................................
.....^.^.^.....^...^.^.............^...^.^.^.^.^.^...^...^.^.^.^.^.^.^...^...............^.......^.^.^.....^.^...^.^.^.^.......^...^.^.^.....
.............................................................................................................................................
....^...^.^.^...^...^...^.^.......^...^.^.^.^.^.^.^...^.^.^.^.^.....^.^...^.^...^.^.^.^.........^.....^.^...^...^.^.^.^.^...^.^...^...^.^....
.............................................................................................................................................
...^...^.....^.^.^...^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.....^...^...^...^.^.^.^.^...^.^.^.^.^.^.^.^.......^.^.^.^.^.^...^.^...^.^.^...^...^...
.............................................................................................................................................
..^.^...^.^.^.^.^...^.^.^.^.^.^...^.^.^.^.^.^...^...^.....^.^.^.^.^...^.^...........^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.........^.^.^...^.^..
.............................................................................................................................................
.^...^.^.^.^...^.....^.^.^.^.^.^.^.^.^...^.^.^...^.^.^...^.^...^.^.^.^...^...^.....^.....^...^.^...^.^.^...^.^.....^...^.^.^.^.^.^.^.^.^.^.^.
.............................................................................................................................................
";

pub fn run() {
    let now = Instant::now();
    part1();
    let elapsed = now.elapsed();
    println!("Part1 Elapsed: {}μs", elapsed.as_micros());

    let now = Instant::now();
    part2();
    let elapsed = now.elapsed();
    println!("Part2 Elapsed: {}μs", elapsed.as_micros());
}

fn part1() {
    let mut lines = INPUT2.lines().skip(1).collect_vec();
    let mut indices = HashSet::new();
    let mut splits = 0;

    for line in lines {
        for (i, char) in line.chars().enumerate() {
            match char {
                'S' => {
                    indices.insert(i);
                }
                '^' => {
                    if indices.remove(&i) {
                        splits += 1;
                        indices.insert(i + 1);
                        indices.insert(i - 1);
                    }
                }
                _ => {}
            }
        }
    }

    println!("{}", splits);
}

fn part2() {
    let mut lines = INPUT2.lines().skip(1).collect_vec();
    // let mut indices = HashSet::new();
    let mut splits = 0;

    let mut row = Vec::<usize>::new();
    let mut row2 = Vec::<usize>::new();
    for _ in 0..lines[0].len() {
        row.push(1);
        row2.push(1);
    }

    for line in lines.into_iter().rev() {
        dbg!(line);
        for (i, char) in line.chars().enumerate() {
            match char {
                '^' => row2[i] = *row.get(i - 1).unwrap_or(&0) + *row.get(i + 1).unwrap_or(&0),
                'S' => {
                    row2[i] = row[i];
                    println!("{}", row2[i]);
                }
                _ => row2[i] = row[i],
            }
        }
        // println!("{:?}", row2);
        row = row2.clone();
    }
}
